(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{2770:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(5155),a=s(6874),o=s.n(a),n=s(6766);function l(){return(0,r.jsx)("nav",{className:"sticky top-0 bg-white shadow z-50",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(n.default,{src:"/logo.jpg",alt:"JoyTrip Logo",width:40,height:40,className:"rounded-full"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:"JoyTrip"})]}),(0,r.jsxs)("ul",{className:" hidden md:flex space-x-6 text-gray-700 absolute left-1/2 transform -translate-x-1/2",children:[(0,r.jsx)("li",{children:(0,r.jsx)(o(),{href:"/",children:"Home"})}),(0,r.jsx)("li",{children:(0,r.jsx)(o(),{href:"/#about",children:"About"})}),(0,r.jsx)("li",{children:(0,r.jsx)(o(),{href:"/#features",children:"Features"})}),(0,r.jsx)("li",{children:(0,r.jsx)(o(),{href:"/#contact",children:"Contact"})})]}),(0,r.jsx)(o(),{href:"/chat",className:"hidden md:block bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Create a Trip"})]})})}},3146:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(5155),a=s(2115),o=s(2770),n=s(7145);let l=e=>{let{role:t,text:s,weather:a}=e;return(0,r.jsx)("div",{className:"flex ".concat("user"===t?"justify-end":"justify-start"),children:(0,r.jsxs)("div",{className:"px-5 py-3 rounded-lg shadow-md max-w-[80%] ".concat("user"===t?"bg-blue-600 text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"),children:[(0,r.jsx)("div",{className:"whitespace-pre-wrap",children:s}),a&&(0,r.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-300",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:(0,r.jsx)("path",{d:"M12 2a8 8 0 0 1 8 8c0 2.76-.98 5-2.2 6.7-1.2 1.7-2.8 2.8-4.8 3.3-.8.2-1.3-.1-1-1 .2-.6.3-1.2.4-1.8.1-.7-.4-1.2-1.1-1.2h-2.6c-.7 0-1.2.5-1.1 1.2.1.6.2 1.2.4 1.8.3.9-.2 1.2-1 1-2-.5-3.6-1.6-4.8-3.3C1 15 0 12.8 0 10a8 8 0 0 1 8-8h4z"})}),(0,r.jsxs)("span",{className:"font-medium",children:[a.location,": "]}),(0,r.jsxs)("span",{className:"ml-1",children:[a.temperature,"\xb0C, ",a.condition]})]})})]})})},i={weather:{text:"ขณะนี้สภาพอากาศในกรุงเทพฯ ร้อนมาก ไม่เหมาะกับการท่องเที่ยวกลางแจ้ง แนะนำให้เที่ยวในห้างสรรพสินค้าหรือพิพิธภัณฑ์",weather:{location:"กรุงเทพมหานคร",temperature:32,condition:"แดดจัด"}}},c=async e=>{try{let t,s,r=new AbortController,a=setTimeout(()=>r.abort(),2e4),o=await fetch("https://joytrip2.app.n8n.cloud/webhook/2e3f1d63-42be-4c89-ae64-fd3cb2cfb9cf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,timestamp:new Date().toISOString(),sessionId:"joytrip-user-session-"+new Date().getTime()}),signal:r.signal});if(clearTimeout(a),!o.ok)throw Error("Error: ".concat(o.status));let n=o.headers.get("content-type");console.log("Response content type:",n);try{if(n&&n.includes("application/json"))try{t=await o.json()}catch(s){console.error("JSON parsing error:",s);let e=await o.clone().text();console.log("Raw response text:",e),t=e&&e.trim()?e:{text:"ไม่มีคำตอบจากเซิร์ฟเวอร์ โปรดลองอีกครั้งภายหลัง"}}else{let e=await o.text();if(console.log("Text data received:",e),e&&""!==e.trim())try{t=JSON.parse(e)}catch(s){t=e}else t={text:"ไม่มีคำตอบจากเซิร์ฟเวอร์ กรุณาลองอีกครั้ง"}}}catch(e){console.error("Error processing response:",e),t={text:"เกิดข้อผิดพลาดในการประมวลผลคำตอบ"}}console.log("Data received from n8n:",t);let l="ไม่สามารถประมวลผลคำตอบได้";"object"==typeof t?t.output&&"string"==typeof t.output?(console.log("Found output field in JSON:",t.output),l=t.output):"string"==typeof t.text?(l=t.text,s=t.weather):"string"==typeof t.message?l=t.message:t.response&&"string"==typeof t.response.text?(l=t.response.text,s=t.response.weather):t.content&&"string"==typeof t.content?l=t.content:t.result&&"string"==typeof t.result?l=t.result:t.error&&"string"==typeof t.error&&(l="เกิดข้อผิดพลาด: ".concat(t.error)):"string"==typeof t&&(l=t.trim(),console.log("Using direct text message from n8n:",l));let i={text:l,weather:s};return console.log("Formatted response:",i),i}catch(s){console.error("Error sending message to n8n:",s);let t=e.toLowerCase();if(t.includes("อากาศ")||t.includes("weather"))return i.weather;return{text:"ขออภัย ฉันไม่สามารถเชื่อมต่อกับเซิร์ฟเวอร์ได้ในขณะนี้ กำลังทำงานในโหมดออฟไลน์ คุณสามารถถามคำถามพื้นฐานได้"}}};function d(){let[e,t]=(0,a.useState)([{role:"bot",text:"Hi! How can I assist you with your trip planning today?"}]),[s,i]=(0,a.useState)(""),[d,x]=(0,a.useState)(!1),u=(0,a.useRef)(null),h=()=>{var e;null==(e=u.current)||e.scrollIntoView({behavior:"smooth",block:"nearest"})},m=async()=>{if(s.trim()&&!d){i(""),x(!0),t(e=>[...e,{role:"user",text:s}]),h();try{let e=await c(s);t(t=>[...t,{role:"bot",text:e.text,weather:e.weather}])}catch(e){console.error("Error handling message:",e),t(e=>[...e,{role:"bot",text:"Sorry, I encountered a problem. Please try again later."}])}finally{x(!1)}}};return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col font-sans bg-white",children:[(0,r.jsx)(o.A,{}),(0,r.jsx)("main",{className:"flex-1 flex justify-center bg-gradient-to-b from-blue-50 to-white px-4 py-10 mb-50",children:(0,r.jsxs)("div",{className:"w-full max-w-3xl flex flex-col bg-white shadow-xl rounded-xl border border-gray-200",children:[(0,r.jsx)("div",{className:"bg-blue-600 text-white text-center py-4 rounded-t-xl font-semibold text-lg",children:"✈️ JoyTrip AI Travel Assistant"}),(0,r.jsxs)("div",{className:"flex-1 px-4 py-6 space-y-4 overflow-y-auto",style:{maxHeight:"70vh"},children:[e.map((e,t)=>(0,r.jsx)(l,{role:e.role,text:e.text,weather:e.weather},t)),d&&(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsx)("div",{className:"px-5 py-3 rounded-lg shadow-md bg-gray-100 text-gray-800 rounded-bl-none flex items-center",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("div",{className:"h-3 w-3 bg-blue-600 rounded-full animate-bounce"}),(0,r.jsx)("div",{className:"h-3 w-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),(0,r.jsx)("div",{className:"h-3 w-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})})}),(0,r.jsx)("div",{ref:u})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 p-4 flex gap-2 bg-white",children:[(0,r.jsx)("input",{type:"text",value:s,onChange:e=>i(e.target.value),onKeyDown:e=>"Enter"===e.key&&m(),placeholder:"Ask your travel assistant...",className:"flex-grow rounded-full border border-gray-300 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0,disabled:d}),(0,r.jsx)("button",{onClick:m,className:"".concat(d?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"," text-white rounded-full px-6 py-3 font-semibold transition"),disabled:d,children:d?"Sending...":"Send"})]})]})}),(0,r.jsx)(n.A,{})]})}},7145:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(5155),a=s(6766);function o(){return(0,r.jsxs)("footer",{id:"contact",className:"bg-gray-900 text-gray-300 py-8 px-6 text-center",children:[(0,r.jsxs)("p",{className:"mb-4 text-lg",children:["Have any questions? "," ","contact via LINE"]}),(0,r.jsx)(a.default,{src:"/qr.JPG",alt:"QR Code",className:"ml-150 mb-10",width:200,height:200}),(0,r.jsxs)("p",{className:"text-sm",children:["\xa9 ",new Date().getFullYear()," JoyTrip. All rights reserved."]})]})}},9887:(e,t,s)=>{Promise.resolve().then(s.bind(s,3146))}},e=>{var t=t=>e(e.s=t);e.O(0,[259,441,684,358],()=>t(9887)),_N_E=e.O()}]);